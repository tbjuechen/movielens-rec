# 召回阶段实验评估报告 (Recall Evaluation)

## 1. 实验设置
- **数据集**: MovieLens 32M
- **切分方式**: 80% 训练集, 10% 验证集, 10% 测试集 (按全局时间戳切分)
- **评估指标**: HitRate@50 (采样 1000 名测试用户)
- **过滤逻辑**: 召回列表自动过滤掉用户在训练集中已看过的电影。

## 2. 实验结果

| 召回算法 (Recall Channel) | HitRate@50 | 备注 |
| :--- | :--- | :--- |
| **Popularity (热门)** | 0.08 ~ 0.12 | 基准线，反映了全局流行趋势对未来行为的预测能力。 |
| **ItemCF (协同过滤)** | 0.22 ~ 0.28 | 个性化核心，通过“看了又看”的共现关系捕捉兴趣。 |
| **Two-Tower V2 (双塔)** | 0.19 ~ 0.25 | 深度模型，通过融合题材和统计特征，在长尾电影上表现更佳。 |

## 3. 核心洞察与故障排查记录

### 3.1 ItemCF 的 "0 分" 事件
- **问题**: 实验初期 ItemCF 的 HitRate 为 0.0000。
- **原因**: 训练集使用了全量数据（包含测试集），ItemCF 内部的“已看过滤”逻辑将测试集中的正样本作为“已看”全部过滤掉了。
- **解决**: 统一各模型训练集为 `train.parquet`（前 80%），确保测试集对模型完全不可见。

### 3.2 热门召回的 "虚高" 现象
- **现象**: 早期热门召回 HitRate 高达 48%。
- **分析**: 该版本没有实现“已看过滤”，模型把用户已经看过的经典大片反复推荐给用户，虽然在指标上很高，但在业务上是无效推荐。
- **改进**: 在 `PopularityRecall` 中加入 `user_history` 过滤逻辑，获得真实召回水平。

### 3.3 双塔模型的性能
- **优势**: 相比 ItemCF，双塔模型能够处理题材（Genres）等内容特征，对于没有共现关系的长尾电影具备召回能力。
- **待改进**: 目前仍有提升空间，未来可以尝试引入“难负采样”（Hard Negative Sampling）来进一步增强模型的分辨率。
